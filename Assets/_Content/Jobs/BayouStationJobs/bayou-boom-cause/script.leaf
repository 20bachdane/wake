:: basePath job.boom-cause

// INTRO

:: start
@trigger    JobStarted
@cutscene
$if HasEntity(Methane),HasEntity(Methanogen)
    {@kevin} I think we already have everything we need. You might want to look over AQOS again before we make any claims to {nameof profHarper}.
$else
    {@kevin} Let's just go down to {h}Site N{/h} and start scanning stuff, I guess.
$endif

:: atSiteN
@trigger SceneStart
@when    scene:name == "RS-3N", JobTaskActive(methaneScan)
@once
@cutscene
{@kevin} There must be something here that would indicate how this disaster happened. When you think you've found it, go talk to {nameof profHarper}.

:: methaneScanned
@trigger JobTaskUpdated
@when    JobTaskActive(reportBack)
@once
@cutscene
{@kevin}    Looks like there was some different types of methane down here.
{@kevin}    Let's not stay here longer than we need to, that stuff is explosive!

<<<<<<< HEAD
=======
:: methaneTagCompleted
@trigger JobTaskUpdated
@when    JobTaskActive(methaneTag)
@once
@cutscene
{@kevin}    [TEMP] methaneTag

>>>>>>> e35bf0c9f9ff792112a1524940d5d2a375b93de3
// CATCH-ALL GUIDE TEXT
:: catchGoToSiteN
@trigger    RequestPartnerHelp
@when 		scene:name != "RS-3N", JobTaskActive(methaneScan)
@boostScore -5
@cutscene
{@kevin}    Dive at {h}Site N{/h} and scan anything you think might have caused the wreckage.
<<<<<<< HEAD

:: catchAtSiteN
=======
            We can get there by diving deep down into {h}Site O{/h}
            Hope you aren't scared of the dark!

:: catchAtSiteNScan
>>>>>>> e35bf0c9f9ff792112a1524940d5d2a375b93de3
@trigger    RequestPartnerHelp
@when 		scene:name == "RS-3N", JobTaskActive(methaneScan)
@boostScore -5
@cutscene
{@kevin}    Scan anything you think might have ruined the communications equipment.

<<<<<<< HEAD
=======
:: catchAtSiteNTag
@trigger    RequestPartnerHelp
@when 		scene:name == "RS-3N", JobTaskActive(methaneTag)
@boostScore -5
@cutscene
{@kevin}    Tag the types of methane you found to get their population information.

>>>>>>> e35bf0c9f9ff792112a1524940d5d2a375b93de3
:: catchReportBack
@trigger    RequestPartnerHelp
@when 		
@boostScore -10
@cutscene
{@kevin}    You're ready to talk it through with {nameof profHarper}, though you might want to review your AQOS first.


// ARGUMENTATION
::  argue.intro
@trigger    TryArgumentation
@when   !ArgueIsComplete(bayouBoomArgue)
@cutscene
<<<<<<< HEAD
<<<<<<< HEAD
$call ArgueLoad(bayouBoomArgue)
=======
$goto .argue.firstQuestion

::  argue.firstQuestion
>>>>>>> cfbaa6fc8 (Bayou-boom-cause implemented)
=======
$goto .argue.firstQuestion

::  argue.firstQuestion
>>>>>>> e35bf0c9f9ff792112a1524940d5d2a375b93de3
{@profHarper} What caused the communication tower to collapse?
$if !ArgueIsComplete(bayouBoomArgueFishCriminals)
    $choice .argue.methaneHere; There's methane here.
    $choice .argue.fishersFault; Fishers blew it up.
    $choice .argue.giveUp; Let me get back to you.
    $choose branch
$else
    $choice .argue.methaneHere; There's methane here.
    $choice .argue.giveUp; Let me get back to you.
    $choose branch
$endif

:: argue.methaneHere
<<<<<<< HEAD
<<<<<<< HEAD
{@profHarper} Really? What methane did you find?
=======
$call ArgueLoad(bayouBoomArgueMethane)
{@profHarper} Really? What methane did you find at {h}Site N{/h}?
>>>>>>> cfbaa6fc8 (Bayou-boom-cause implemented)
$goto .argue.chooseFacts

:: argue.chooseFacts
$call ArgueDisplayClaim()
$if ArgueAllFactsCorrect()
    $goto .argue.done
$else
    $choice #argueFactSet; Present facts from AQOS
        $answer Methane, .argue.methane
        $answer Methanogen, .argue.methanogen
        $answer *, .argue.unrelated
    $choice .argue.giveUp; Let me get back to you.
$endif
=======
$call ArgueLoad(bayouBoomArgueMethane)
{@profHarper} Really? What methane did you find at {h}Site N{/h}?
$goto .argue.chooseFacts

:: argue.chooseFacts
$if ArgueSetClaim(Claim, jobs.bayou-boom-cause.argue.claimLabel1) 
    $call ArgueFactSlot(N_ThermalVent.Population.Methane) 
$endif
$call ArgueDisplayClaim()
$choice #argueFact; Present facts from AQOS
    $answer N_ThermalVent.Population.Methane, .argue.done
    $answer N_ThermalVent.Population.Methanogen, .argue.done
    $answer *, .argue.unrelated
$choice .argue.giveUp; Let me get back to you.
$choose branch
>>>>>>> e35bf0c9f9ff792112a1524940d5d2a375b93de3

:: argue.fishersFault
$call ArgueLoad(bayouBoomArgueFishCriminals)
$if ArgueSetClaim(Claim, jobs.bayou-boom-cause.argue.claimLabel2) 
<<<<<<< HEAD
    $call ArgueFactSlot(Methanogen.Temperature.Stressed) 
=======
    $call ArgueFactSlot(SeaOtter.Eats.Urchin) 
$endif
>>>>>>> e35bf0c9f9ff792112a1524940d5d2a375b93de3
$call ArgueDisplayClaim()
{@profHarper} What evidence do you have of foul play?
$choice #argueFactSet; Present facts from AQOS
    $answer correct, .argue.unrelatedFishers
    $answer *, .argue.unrelatedFishers
$choice .argue.giveUp; Let me get back to you.
$choose branch

:: argue.unrelatedFishers
{@profHarper} I don't think this actually indicates human involvement.
$call ArgueRejectIncorrect()
<<<<<<< HEAD
<<<<<<< HEAD
{@profHarper} What caused the communication tower to collapse?
    $choice .argue.methaneHere; There's methane here.
    $choice .argue.fishersFault; Fishers blew it up.
    $choose branch

:: argue.methane
$if ArgueIsFactSubmitted(Methanogen)
    $goto .argue.done
$else
    {@profHarper}   So there was {nameof Methane} down there, anything else?
    $goto argue.chooseFacts
$endif

:: argue.methanogen
$if ArgueIsFactSubmitted(Methane)
    $goto .argue.done
$else
    {@profHarper}   So there was {nameof Methanogen} down there, anything else?
    $goto argue.chooseFacts
$endif
=======
$call ArgueComplete()
$goto .argue.firstQuestion
>>>>>>> cfbaa6fc8 (Bayou-boom-cause implemented)

:: argue.unrelated
$call ArgueDisplayClaim()
=======
$call ArgueComplete()
$goto .argue.firstQuestion

:: argue.unrelated
>>>>>>> e35bf0c9f9ff792112a1524940d5d2a375b93de3
{@profHarper}   That doesn't look like a type of Methane to me...
$call ArgueRejectIncorrect()
$goto .argue.chooseFacts

:: argue.giveUp
{@profHarper} OK. Get back to me when you're ready.
$call ArgueCancelClaim()
$call ArgueUnload()

// END
:: argue.done
<<<<<<< HEAD
<<<<<<< HEAD
$call ArgueComplete(bayouBoomArgue)
=======
$call ArgueLoad(bayouBoomArgue)
$call ArgueComplete()
>>>>>>> cfbaa6fc8 (Bayou-boom-cause implemented)
=======
$call ArgueLoad(bayouBoomArgue)
$call ArgueComplete()
>>>>>>> e35bf0c9f9ff792112a1524940d5d2a375b93de3
{@profHarper}   Oh, I hear Methane is very explosive. It must have heated enough to ignite and explode. Good work!
$call CompleteJob()